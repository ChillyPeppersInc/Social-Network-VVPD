<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: commonHead(~{::specific-head})}">
    <th:block th:fragment="specific-head">
        <link th:href="@{/css/index.css}" rel="stylesheet">
        <link th:href="@{/css/settings.css}" rel="stylesheet">
        <title>настройки</title>
    </th:block>
</head>

<body>
    <div th:insert="~{fragments/header :: header}"></div>

    <div class="settings-page animate__animated animate__fadeIn">
        <div class="profile-sidebar">
            <img th:src="@{/images/default-avatar.png}" class="profile-avatar" id="avatar-preview">

            <h2 class="profile-name">
                <span th:text="${user.name}"></span>
                <span th:text="${user.surname}"></span>
            </h2>
            <p class="profile-username" th:text="'@' + ${user.username}"></p>

            <div class="settings-menu">
                <div class="menu-item active" data-tab="profile-settings">
                    <i class="fas fa-user-cog"></i> Профиль
                </div>
                <div class="menu-item" data-tab="password-settings">
                    <i class="fas fa-lock"></i> Безопасность
                </div>
                <div class="menu-item" data-tab="privacy-settings">
                    <i class="fas fa-eye"></i> Приватность
                </div>
            </div>
        </div>

        <div class="settings-content">
            <h3 class="section-title">
                <i class="fas fa-user-cog"></i> Настройки профиля
            </h3>

            <!-- Настройки профиля -->
            <div class="settings-tab active" id="profile-settings">
                <form id="profile-form">
                    <div class="form-group avatar-upload">
                        <label>Аватар</label>
                        <div class="avatar-upload-container">
                            <img th:src="@{/images/default-avatar.png}" id="avatar-preview" class="avatar-preview">
                            <div class="upload-controls">
                                <input type="file" id="avatar-input" accept="image/*" style="display: none;">
                                <button type="button" class="upload-button" onclick="document.getElementById('avatar-input').click()">
                                    <i class="fas fa-upload"></i> Загрузить
                                </button>
                                <button type="button" class="remove-button" id="remove-avatar">
                                    <i class="fas fa-trash"></i> Удалить
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="name">Имя</label>
                        <input type="text" id="name" th:value="${user.name}" class="form-input">
                    </div>

                    <div class="form-group">
                        <label for="surname">Фамилия</label>
                        <input type="text" id="surname" th:value="${user.surname}" class="form-input">
                    </div>

                    <div class="form-group">
                        <label for="username">Имя пользователя</label>
                        <input type="text" id="username" th:value="${user.username}" class="form-input">
                    </div>

                    <div class="form-group">
                        <label for="bio">О себе</label>
                        <textarea id="bio" class="form-textarea" th:text="${user.bio}" placeholder="Расскажите о себе..."></textarea>
                    </div>

                    <div class="form-group">
                        <label for="birthdate">Дата рождения</label>
                        <input type="date" id="birthdate" th:value="${#temporals.format(user.birthdate, 'yyyy-MM-dd')}" class="form-input">
                    </div>

                    <div class="form-actions">
                        <button type="button" class="cancel-button">Отмена</button>
                        <button type="submit" class="save-button">Сохранить изменения</button>
                    </div>
                </form>
            </div>

            <!-- Настройки безопасности -->
            <div class="settings-tab" id="password-settings">
                <form id="password-form">
                    <div class="form-group">
                        <label for="current-password">Текущий пароль</label>
                        <input type="password" id="current-password" class="form-input" required>
                    </div>

                    <div class="form-group">
                        <label for="new-password">Новый пароль</label>
                        <input type="password" id="new-password" class="form-input" required>
                        <div class="password-strength">
                            <div class="strength-bar"></div>
                            <div class="strength-text">Слабый</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="confirm-password">Подтвердите новый пароль</label>
                        <input type="password" id="confirm-password" class="form-input" required>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="cancel-button">Отмена</button>
                        <button type="submit" class="save-button">Изменить пароль</button>
                    </div>
                </form>
            </div>

            <!-- Настройки приватности -->
            <div class="settings-tab" id="privacy-settings">
                <form id="privacy-form">
                    <div class="form-group">
                        <label>Приватность профиля</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="privacy" value="public" checked>
                                <span class="radio-label">Публичный (видят все)</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="privacy" value="private">
                                <span class="radio-label">Приватный (только подписчики)</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Кто может писать вам сообщения</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="messages" value="all" checked>
                                <span class="radio-label">Все пользователи</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="messages" value="followers">
                                <span class="radio-label">Только подписчики</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="messages" value="none">
                                <span class="radio-label">Никто</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-option">
                            <input type="checkbox" id="show-activity">
                            <span>Показывать мой статус активности</span>
                        </label>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="cancel-button">Отмена</button>
                        <button type="submit" class="save-button">Сохранить настройки</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script th:src="@{/js/settings.js}"></script>
</body>
</html>